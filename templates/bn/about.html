{% extends "bn_base.html" %}
{% load static %}
{% block title %}Osama Abdullah | Shopify Developer{% endblock %}
{% block css %}
<link rel="stylesheet" href="{% static 'css/bn_about.css' %}" />
{% endblock %} 
{% block content %}
<!-- Hero -->
<header class="hero">
    {% if page.hero_badge_text %}
    <div class="hero-badge">
        <i class="ph-bold ph-seal-check"></i> {{ page.hero_badge_text }}
    </div>
    {% endif %}

    <h1>{{ page.hero_title }}</h1>
    {% if page.hero_subtitle %}
    <p>{{ page.hero_subtitle }}</p>
    {% endif %}

    {% if page.hero_video_url %}
    <div class="video-wrapper">
        <iframe 
            src="{{ page.hero_video_url }}" 
            title="YouTube video player" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture;" 
            referrerpolicy="strict-origin-when-cross-origin" 
            allowfullscreen>
        </iframe>
    </div>
    {% else %}
        {% if profile.profile_image %}  
        <div class="video-wrapper">
            <img src="{{ profile.profile_image.url }}" alt="Profile Image">
        </div>
        {% endif %}
    {% endif %}

    <div class="btn-group">
        {% if page.hero_cta_text and page.hero_cta_link %}
        <a href="{{ page.hero_cta_link }}" class="btn btn-primary">{{ page.hero_cta_text }}</a>
        {% else %}
        <a href="#scheduler" class="btn btn-primary">
            মিটিং শিডিউল করুন <i class="ph-bold ph-calendar"></i>
        </a>
        {% endif %}
    </div>
</header>

<!-- Services -->
<section class="section" id="services">
    <div class="center-title">
        <h2>{{ page.service_title }}</h2>
        <p style="color: var(--text-muted)">{{ page.service_subtitle }}</p>
        <div></div>
    </div>
    <div class="card-grid">
        {% for service in page.services.all %}
        <div class="card">
            {{ service.icon|safe }}
            <h3>{{ service.title }}</h3>
            <p>{{ service.description }}</p>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Portfolio Section -->
<section class="section" id="portfolio" style="background: rgba(255,255,255,0.01);">
    <div class="center-title">
        <h2>{{ page.project_title }}</h2>
        <p style="color: var(--text-muted)">{{ page.project_subtitle }}</p>
        <div></div>
    </div>
    <div class="portfolio-grid">
        {% for project in page.projects.all %}
        <div class="portfolio-item">
            {% if project.image %}
            <div class="portfolio-img">
                <img
                    src="{{ project.image.url }}"
                    alt="{{ project.title }}"
                />
            </div>
            {% else %}
            <div class="portfolio-img"><i class="ph ph-shopping-cart"></i></div>
            {% endif %}

            <div class="portfolio-info">
                <h4>{{ project.title }}</h4>
                <a class="btn-link" href="{% url 'project_detail' project.slug %}">
                    View Details ↗
                </a>
                <p style="color: var(--text-muted); font-size: 0.9rem; margin-top: 10px;">{{ project.excerpt|default:project.hero_description|truncatechars:270 }}</p>
                <div class="portfolio-tags">
                    {% for technology in project.technologies.all %}
                    <span class="tag">{{ technology.name }}</span>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Pricing Section -->
<section class="section" id="pricing">
    <div class="center-title">
        <h2>{{ page.pricing_title }}</h2>
        <p style="color: var(--text-muted)">{{ page.pricing_subtitle }}</p>
        <div></div>
    </div>

    <div class="pricing-grid">
        {% for plan in page.pricing_plans.all %}
        <div class="pricing-card {% if plan.featured %}featured{% endif %}">
            <h3>{{ plan.name }}</h3>
            <div class="pricing-price">{{ plan.price }}</div>
            <ul class="pricing-list">
                {% for feature in plan.features.splitlines %}
                <li><i class="ph-bold ph-check"></i> {{ feature }}</li>
                {% endfor %}
            </ul>
            {% if plan.cta_text and plan.cta_link %}
            <a href="{{ plan.cta_link }}" class="btn btn-primary" style="width: 100%; justify-content: center;">{{ plan.cta_text }}</a>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</section>

<!-- Meeting Scheduler Section (Calendly Type) -->
<section class="section" id="scheduler">
    <div class="center-title">
        <h2>{{ page.meeting_title }}</h2>
        <p style="color: var(--text-muted)">{{ page.meeting_subtitle }}</p>
        <div></div>
    </div>
    
    <div class="calendly-section">
        {% if page.calendly_url %}
        <!-- Calendly inline widget -->
        <div class="calendly-inline-widget" 
            data-url="{{ page.calendly_url }}" 
            style="min-width:320px;height:700px;">
        </div>
        <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
        {% endif %}
    </div>
</section>

<!-- Experience Detail -->
<section class="section" id="about" style="background: rgba(255,255,255,0.01);">
    <div class="experience-box">
        <div class="exp-content">
            <h3>{{ page.experience_title }}</h3>
            <p style="color: var(--text-muted); margin-bottom: 2rem;">{{ page.experience_subtitle }}</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <h4>{{ profile.years_of_experience }}+</h4>
                    <p>বছর অভিজ্ঞতা</p>
                </div>
                <div class="stat-card">
                    <h4>{{ project_count }}+</h4>
                    <p>সফল প্রজেক্ট</p>
                </div>
                <div class="stat-card">
                    <h4>100%</h4>
                    <p>শপিফাই ফোকাস</p>
                </div>
            </div>
        </div>
        <div class="exp-visual">
            <div style="background: var(--card-bg); padding: 30px; border-radius: 24px; border: 1px solid var(--glass-border);">
                <h4 style="margin-bottom: 20px;">{{ page.process_title }}</h4>
                <p style="color: var(--text-muted); margin-bottom: 2rem;">{{ page.process_subtitle }}</p>
                <div class="process-grid">
                    {% for step in page.process_steps.all %}
                    <div class="process-step">
                        <div class="step-num">{{ step.order }}</div>
                        <p style="font-size: 0.85rem;">{{ step.title }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials -->
<section class="section" id="testimonials">
    <div class="center-title">
        <h2>{{ page.testimonial_title }}</h2>
        <p style="color: var(--text-muted); margin-bottom: 2rem;">{{ page.testimonial_subtitle }}</p>
        <div></div>
    </div>
    <div class="testimonial-grid">
        {% for testimonial in page.testimonials.all %}
        <div class="testimonial-card">
            <div class="stars">
                {% for _ in "12345" %}
                {% if forloop.counter <= testimonial.rating %}
                ★
                {% else %}
                ☆
                {% endif %}
                {% endfor %}
            </div>

            <p>"{{ testimonial.body }}"</p>
            <div class="user-info" style="margin-top: 20px;">
                <div class="user-avatar"></div>
                <div>
                    <h5 style="margin-bottom: 2px;">{{ testimonial.name }}</h5>
                    <small style="color: var(--text-muted);">{{ testimonial.role }}</small>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- FAQ Section -->
<section class="section" style="background: rgba(255,255,255,0.01);">
    <div class="center-title">
        <h2>{{ page.faq_title }}</h2>
        <p style="color: var(--text-muted); margin-bottom: 2rem;">{{ page.faq_subtitle }}</p>
        <div></div>
    </div>
    <div class="faq-container">
        {% for faq in page.faqs.all %}
        <div class="faq-item">
            <h4>{{ faq.question }}</h4>
            <p style="color: var(--text-muted);">{{ faq.answer }}</p>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Contact Form Section -->
<section class="section" id="contact">
    <div class="center-title">
        <h2>{{ page.contact_title }}</h2>
        <p style="color: var(--text-muted);">{{ page.contact_subtitle }}</p>
        <div></div>
    </div>
    <div class="contact-layout">
        <div class="contact-info">
            <div class="card" style="margin-bottom: 20px;">
                <i class="ph-bold ph-envelope"></i>
                <h4>Email Me</h4>
                <p style="color: var(--text-muted);">abdullah21673@hotmail.com</p>
            </div>
            <div class="card">
                <i class="ph-bold ph-whatsapp-logo"></i>
                <h4>WhatsApp</h4>
                <p style="color: var(--text-muted);">+880 1635-307889</p>
            </div>
        </div>
        <div class="form-container">
            <form method="POST">
                {% csrf_token %}

                {% for field in form %}
                    <div class="form-group">
                        <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                        {{ field }}

                        {% if field.help_text %}
                            <small class="form-text text-muted">
                                {{ field.help_text }}
                            </small>
                        {% endif %}

                        {% if field.errors %}
                            <div class="text-danger">
                                {{ field.errors }}
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}

                <button type="submit"
                        class="btn btn-primary"
                        style="width: 100%; justify-content: center;">
                    মেসেজ পাঠান <i class="ph-bold ph-paper-plane-tilt"></i>
                </button>
            </form>
        </div>
    </div>
</section>
{% endblock %}
